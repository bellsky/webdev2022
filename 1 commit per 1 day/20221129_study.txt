20221129_study


-정보보안
    9.2 IP 보안 정책

        IPsec 작동의 기본은 소스에서 대상으로 전송되는 각 IP 패킷에 적용되는 보안 정책 개념이다.

        보안 연관 Security Association

            IP에 대한 인증 및 기밀성 메커니즘 모두에 나타나는 핵심 개념은 SA이다.
            SA?
                그 위에 실어 보내는 트래픽에 보안서비스르르 제공하는 송신자와 수신자 사이의 일방향 관계
            
            보안 연관 식별 매개변수

                세가지 매개변수로 고유하게 식별된다.
                    -보안 매개변수 색인
                    -IP 목적지 주소
                    -보안 프로토콜 식별자
                SA는 IP v4(v6) 헤더 안의 목적지 주소와 그 안에 포함된 확장헤더 속의 
                    SPI를 가지고 유일하게 식별된다.

            SAD 보안 매개변수 
                -보안 매개변수 색인 SPI
                -순서 번호 카운터
                -순서 계수기 오버플로우
                -재전송 방지 윈도우
                -AH 정보
                -ESP 정보
                -보안 연관이 사용주기
                -IPsec프로토콜 모드
                -경로 MTU

        보안 정책 데이터베이스
            : IP 트래픽을 특정 SA에 연관시키는 방법.(*IPsec를 우회하는 것이 허용된 트래픽은 SA가 없다) 명목상의 DB이다.
            
            아웃바운드 IP 패킷 처리절차 
                1. 패킷에 들어있는 해당 필드 값에 대응되는 SPD 엔트리를 찾기 위해 SPD와 비교(*일치하는 SPD 엔트리는 0개 이상의 SA를 가르킨다.) 
                2 이들 패킷에 대한 SPD와 연관된 SPU가 있다면 SA를 결정
                3 필요한 IPsec 절차 처리절차

            selector
                IP와 집합으로 정의되는 상위계층의 프로토콜 필드 값

            아웃바운드 ***

            IP 트래픽 처리

                -IPsec은 개별 패킷 기반으로 처리한다.
                    -아웃바운드는 전송되기 전
                    -인바운드는

    9.3 캡슐화 보안 페이로드 = ESP  

        제공 서비스
            -기밀성
            -데이터 출처 인증
            -비연결형 무결성
            -재전송 방지 서비스(*부분적 순서 무결성의 형태임)
            -트래픽 흐름의 비밀성이 제한됨

        GCM같은 인증 암호화 알고리즘을 포함하여 다양한 암호화와 인증 알고리즘으로 동작함


        ICV 필드
            -옵션 : ICV는 무결성 서비스가 선택되고, 개별 무결성 알고리즘이나 ICV를 사용하는 
                결합 모드 알고리즘에 의해 제공될 때에만 나타난다.
            -ICV는 아뫃화 알고리즘이 수행된 뒤에 계산됨.
                -서비스 거부 공격 DOS를 잠재적으로 줄여준다.
                -수신자가 패킷을 병렬처리할 수 있따.(복호화+무결성 병렬 처리)
            -ICV는 암호화로 보호되지 않으므로 키가 적용되는 무결성 알고리즘이 ICV 계산에 적용되어야한다.

        패딩
            : 평문 길이가 특정 길이의 배수가 되어야 하는 암호화 알고리즘에서 필요함.
                ESP 패킷

        재전송 방지 서비스 
            -재전송 공격
                : 공격자가 인증된 패킷의 복사본을 확보하여 나중에 의도하는 목적지로 전송하는 방법.
                -> 순서번호 필드로 재전공 공격을 막는다.
                -순서번호 처리(송신자)
                    -새 SA 성립 시 순서 번호 카운터를 0으로 초기화
                    -패킷을 SA로 전송 시 카운터를 증가. 순서번호 필드 값이 변경된다. 초기값은 1.
                    -재전송 방지가 기본 값으로 설정되어 있을 때,
                    -순서번호가 2^32-1을 넘을 경우 해당 SA는 종료하고 새로운 키를 가진 새로운 SA를 설정한다.

                -순서번호 처리(수신자)
                    -수신된 패킷이 윈도우 범위 내에 있고 새로운 것이면 MAC을 검사한다.
                    -수신된 패킷이 윈도우의 오른쪽에 해당하고 새로운 것이면 MAC을 검사한다.
                    -수신된 패킷이 윈도우의 왼쪽에 해당하고 

        전송모드 ESP    
            IP로 전송되는 데이터를 암호화하고 선택적으로 인증하는데 사용한다.
                IPv4에서 ESP 헤더는 IP 패킷의 바로 앞에 삽입된다.

            전송모드 동작


    9.4 보안 연관 묶기
        SA 한개는 AH나 ESP 중 하나만 구현한다.
        보안 연관묶음
            -원하는 IPsec서비스 집합을 제공하기 위해 트래픽을 처리해야하는 일련의 SA

            -연관 묶는 방법
                -중첩 전송
                -반복 터널링

            -중첩전송
                :터널링을 사용하지 않고 동일한 IP 패킷에서 ~

            -반복터널링

            